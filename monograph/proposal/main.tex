
%
% Licensing
%
%   Copyright 2017 @ Evandro Coan
%
%  This program is free software; you can redistribute it and/or modify it
%  under the terms of the GNU General Public License as published by the
%  Free Software Foundation; either version 3 of the License, or ( at
%  your option ) any later version.
%
%  This program is distributed in the hope that it will be useful, but
%  WITHOUT ANY WARRANTY; without even the implied warranty of
%  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
%  General Public License for more details.
%
%  You should have received a copy of the GNU General Public License
%  along with this program.  If not, see <http://www.gnu.org/licenses/>.
%

%
% Simple Sectioned Essay Template - LaTeX Template
%
% This template has been downloaded from:
% http://www.latextemplates.com
%
% `proposal.tex`
% Based on http://www.latextemplates.com/template/simple-sectioned-essay
%

%----------------------------------------------------------------------------------------
%   PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

% Sets this document font size to 12pt and set is type to article
\documentclass[12pt]{article}

% https://tex.stackexchange.com/questions/664/why-should-i-use-usepackaget1fontenc
\usepackage[T1]{fontenc}

% Sets this document language usage to Portuguese
\usepackage[brazil]{babel}

% Required to change the page size to A4
% \usepackage{geometry}
%
% Sets this document output papel to A4 within 2 centimeters margin
% \geometry{a4paper}
%
% Set the page size to be A4 as opposed to the default US Letter
\usepackage[a4paper, margin=2cm]{geometry}

% Sets the character set of this document to UTF-8
\usepackage[utf8]{inputenc}

% For web links and paths with \path{..} and \url{https://www.python.org/downloads/}
\usepackage{hyperref}

% To use the font Times New Roman, instead of the default LaTeX font
% \usepackage{mathptmx}
%
% more up-to-date than 'mathptmx'
\usepackage{newtxtext,newtxmath}

% For the new command \latex
\usepackage{xspace}

% https://tex.stackexchange.com/questions/10377/texttt-overfull-hbox-problem
% https://tex.stackexchange.com/questions/66052/should-i-load-microtype-with-pdflatex
\usepackage{microtype}

% Indent the first section paragraphs
% https://tex.stackexchange.com/q/39227/119062
\usepackage{indentfirst}

% \lettrine{O}{nce} upon a time...
% \lettrine[findent=2pt]{\fbox{\textbf{T}}}{ }his thesis deals with...
%
% https://tex.stackexchange.com/questions/164298/starting-a-paragraph-with-a-big-letter
\usepackage{lettrine}

% Required for including pictures, resizebox
\usepackage{graphicx}

% Allows putting an [H] in \begin{figure} to specify the exact location of the figure
\usepackage{float}

% Allows in-line images such as the example fish picture
\usepackage{wrapfig}

% Specifies the directory where pictures are stored
\graphicspath{{Pictures/}}

% How to automatically force latex to not justify the text when it is not wise?
% https://tex.stackexchange.com/questions/365801/how-to-automatically-force-latex-to-not-justify-the-text-when-it-is-not-wise
\usepackage{array,ragged2e}

% Use its macro adjustwidth* to extend tables out of outer text border.
% https://tex.stackexchange.com/questions/366155/how-to-write-a-table-a-little-larger-than-the-paragraphs-with-centered-columns
\usepackage[strict]{changepage}

% No spacing between enumerated items with \usepackage{enumerate}
% https://tex.stackexchange.com/questions/119919/no-spacing-between-enumerated-items-with-usepackageenumerate
\usepackage[shortlabels]{enumitem}

\usepackage{tabularx}
\usepackage{multirow}


%
% New Macros
%

% Change background color for text block
% https://tex.stackexchange.com/questions/238294/change-background-color-for-text-block
\usepackage{framed}
\usepackage[most]{tcolorbox}
\definecolor{shadecolor}{RGB}{219, 229, 241}
\newtcolorbox{myquote}{
colback=shadecolor,
grow to right by=-2mm,
grow to left by=-2mm,
boxrule=0pt,
boxsep=0pt,
breakable
}

% Automatically put a `\medskip` spacing between paragraphs
% https://tex.stackexchange.com/q/365976/119062
\edef\restoreparindent{\parindent=\the\parindent\relax}
\usepackage{parskip}
\restoreparindent

% Uncomment to remove all indentation from paragraphs
%\setlength\parindent{0pt}

% How could the `\everypar` justification statement be used?
% https://tex.stackexchange.com/questions/365818/how-could-the-everypar-justification-statement-be-used
\newbox\linebox \newbox\snapbox
\def\eatlines{
  \setbox\linebox\lastbox % check the last line
  \ifvoid\linebox
  \else % if it’s not empty
    \unskip\unpenalty % take whatever is
    {\eatlines} % above it;
    \setbox\snapbox\hbox{\unhcopy\linebox}
    \ifdim\wd\snapbox<.98\wd\linebox
       \box\snapbox % take the one or the other,
    \else \box\linebox \fi
  \fi
}

% How could the `\everypar` justification statement be used?
% https://tex.stackexchange.com/questions/365818/how-could-the-everypar-justification-statement-be-used
\everypar={\setbox0=\lastbox \par
   \vbox\bgroup \everypar={}\def\par{\endgraf\eatlines\egroup}}

% Creates a new environment which can be used as:
%
% \begin{foo}
%   Text...
%
%   Text ...
% \end{foo}
%
% https://tex.stackexchange.com/questions/62333/push-long-words-in-a-new-line
\newenvironment{foo}
{\par
\hyphenpenalty=10000
\exhyphenpenalty=10000
}
{\par}

% Underfull \hbox in bibliography
% https://tex.stackexchange.com/questions/10924/underfull-hbox-in-bibliography
\apptocmd{\thebibliography}{\raggedright}{}{}


%
% New commands
%

% Line spacing
\linespread{1.5}

% Allow to push long words on new lines when they do not fit entirely on the current line.
% https://tex.stackexchange.com/questions/62333/push-long-words-in-a-new-line
\newcommand\lword[1]{\leavevmode\nobreak\hskip0pt plus\linewidth\penalty50\hskip0pt plus-\linewidth\nobreak{#1}}

% Write the word LaTeX nicely.
\newcommand{\latex}{\LaTeX\xspace}

% Create a bold title all in upper case.
\newcommand{\Title}[1]{\textbf{\MakeUppercase{#1}}}


%----------------------------------------------------------------------------------------
%   DOCUMENT CONTENTS
%----------------------------------------------------------------------------------------

\begin{document}

% pdfTeX warning (ext4): destination with the same identifier (nam e{page.1}) has been already used, duplicate ignored
% https://tex.stackexchange.com/questions/18924/pdftex-warning-ext4-destination-with-the-same-identifier-nam-epage-1-has
\hypersetup{pageanchor=false}

\include{cover}


\begin{abstract}

    Os softwares formatadores de código fonte atuais, também conhecidos como Beautifiers, são
    limitados a um conjunto similar, ou mesmo à uma única linguagem, e além de muitos, serem
    limitados ao que eles podem fazer por você ao processar/formatar o código \cite{Terence}.
    Portanto este trabalho tem como objetivo criar um formatador (software único) de fácil
    configuração e expansão capaz de abranger todas as linguagens de programação que existem,
    baseado em um uso específico de expressões regulares.

    \medskip
    A metodologia abordada será de não ter a necessidade de ter-se conhecimento da sintaxe das
    linguagens de programação que se irão fazer o parsing. Isso porque trataremos elas como texto
    comum, e será o usuário final que fará a configuração das transformações que serão aplicados no
    texto, dando liberdade de facilmente se configurar várias linguagens de programação (senão
    todas), aproveitando o fato de que muitas deles compartilham estruturas semelhantes senão
    idênticas.

    \medskip
    Como resultado espera-se ter um Beautifier Universal capaz de abranger todas as linguagens que
    existem, senão que seja facilmente extensível para abrange-las. Os pontos positivos dessa
    abordagem são a reusabilidade de componentes entre as linguagens. Por exemplo, `if/for/while's
    em C++ e Java são da mesma estrutura. Assim temos que escrever somente uma vez a especificação
    para um componente da linguagem.

    \bigskip
    \bigskip
    \textbf{Palavras-chave:}
    source, code, formatter, beautifier, prettyprint, universal, reuse, blocks, object, oriented,
    programming, structured, parsing, parse, regular, expression, regex, C, C++,  grammar, Turing,
    machine, automata, lexer, syntax, sublime, Java, Rust, shell, script, obfuscators, learning,
    syntec, teamicide, concensus, indent, settings.

\end{abstract}

\newpage
\tableofcontents
\newpage

\section{Introdução}

    \hspace*{5mm}

    A ideia de um software, que em certa extensão pode continuar um ramo do Trabalho de Conclusão de
    Curso do aluno `Lucas Boppre Niehues', orientado do Professor `Olinto José Varela Furtado'
    defendido em 2013/1, com o título: `Estudo e Criação de um Editor de Código Estruturado'. Donde
    durante a leitura de seu TCC, encontra-se o seguinte trecho que faz ligação com uma das
    propostas deste trabalho, no capítulo: `8.1.2 Separação de formato de exibição e de saída':

    \medskip
    \begin{myquote}
    ``As formas que o código é exibido ao usuário e que ele é salvo em disco são controladas
    por arquivos de configuração distintos. O arquivo ``theme.ini'' contém, entre outras
    configurações, informações de como serializar a árvore sintática.''
    \end{myquote}

    \vspace{-5mm}
    ...
    \begin{myquote}
    ``A configuração de formato de saída é dada da mesma forma, mas em um arquivo
    separado, chamado ``output\_format.ini''. A decisão desta separação foi em vista de equipes
    de programadores que queiram utilizar uma convenção única para os arquivos salvos,
    mas manter a exibição a escolha de cada um. Assim os integrantes desta equipe podem
    compartilhar os seus arquivos ``output\_format.ini'' enquanto personalizam o arquivo
    ``theme.ini'' a seu gosto.''
    \end{myquote}

    Com base nisso, pode-se pensar na escrita de plugins para editores de texto/IDEs comuns como
    Sublime Text. Assim ao carregar o arquivo do disco, este plugin chama o formatter e faz a
    formatação de acordo com as configurações de exibição para o usuário. Após isso, quando o
    usuário for salvar o arquivo, o arquivo com a formatação original é devolvido.

    Para auxilar nesse processo, um módulo de autoconfiguração é de grande ajuda. Ele detecta como o
    source code está formatado e cria arquivos de configuração para ele. Assim ao salvar o arquivo,
    automaticamente ele é salvo no formato que ele foi lido. Então temos o mesmo beneficio de
    editores estruturados, como proposto trabalho de `Lucas Boppre Niehues'. De inicio podemos
    pensar com os seguinte objetivo/ideia para um TCC:

    \medskip
    \begin{myquote}
    \begin{enumerate}[nolistsep]
        \item Criar um formatador de fácil configuração e expansão para todas as linguagens de
              programação existem e que irão existir.
    \end{enumerate}
    \end{myquote}


\subsection{Problema}

    O problema proposto a se resolver é criar um Beautifier Universal. Os softwares atuais são
    limitados a um conjunto similar, ou mesmo à uma única linguagem, e além de muitos, serem
    limitados ao que eles podem fazer por você ao processar/formatar o código \cite{Terence}.

    Logo abaixo há algumas regras de formatação básica encontrados no serviço online
    \url{http://prettyprinter.de/} acessado em março/2017:

    \medskip
    \begin{myquote}
    \begin{enumerate}[nolistsep]
        \item Add new lines after ``\{'' and before ``\}''
        \item Add new lines before ``\{''
        \item Remove empty lines
        \item Add comment lines before function
        \item Add new lines after ``;''
        \item Add new lines after ``\}''
        \item Remove new lines
        \item Reduce whitespace
        \item Put the code again in the input box above after submit
    \end{enumerate}
    \end{myquote}

    A partir deste ponto, apresenta-se um esboço sobre o problema, soluções, informações como
    porquês de se querer fazer um software assim, ou ainda de querer-se o beautifying:

    \begin{enumerate}

        \item

        Motivação: Existem muitas ferramentas distintas, por vezes pagas, e dificilmente completas
        \cite{Terence}.

        \item

        Muitas linguagens de programação existem, assim sempre ter fazer um software Beautifier para
        cada uma delas é muito trabalhoso \cite{Terence}. Mas a abordagem para um Beautifier
        Universal proposta nesse trabalho, permite que facilmente novas linguagens sejam
        adicionadas, sendo elas completamente diferentes das anteriores, ou similares. No caso de
        similaridades, basta reutilizar as estruturas de configuração das linguagens já existentes.

        \item

        Preocupa-se de fazer um Beautifier para cada uma delas por que programadores atualmente
        trabalham diariamente com varias dessas linguagens, e elas não são similares. Assim precisa-
        se configurar vários beautifiers para fazer a formatação. Isso é um problema por que,
        somente alguns beautifiers são mais completos, e toda vez que precisa-se fazer uma alteração
        no estilo de formatação, precisa-se propagar manualmente a mesma mudança ao longo de vários
        arquivos de configuração de programas distintos, o que é ruim pois toma ao usuário muito
        tempo de aprender a lidar com várias e muito diferentes tipos de configurações
        \cite{Schweitzer}.

        \item

        No caso do Beautifier que propõem-se, uma mudança no estilo é propagada para todas as
        linguagens. E caso queira-se deixar alguma linguagem fora da regra, basta remover ela da
        lista ao qual esse bloco da configuração se aplica, e `a)' deixar ela de fora assim nenhuma
        mudança é aplicada a ela. Ou `b)' criar um novo bloco que inclua somente ela com a
        configuração desejada.

        \item

        A seguir, temos algumas frases sobre o assunto:

        \begin{myquote}
        % \setlength{\itemindent}{5pt}
        ``One of absolute worst, worst methods of teamicide for software developers is to engage
        in these kinds of passive-aggressive formatting wars. I know because I've been there.
        They destroy peer relationships, and depending on the type of formatting, can also damage
        your ability to effectively compare revisions in source control, which is really scary.
        I can't even imagine how bad it would get if the lead was guilty of this behavior. That's
        leading by example, all right. Bad example.'', \cite{Atwood}.
        \end{myquote}
        \vspace{-5mm}
        ...
        \begin{myquote}
        ``So yes, absurd as it may sound, fighting over whitespace characters and other seemingly
        trivial issues of code layout is actually justified. Within reason of course -- when done
        openly, in a fair and concensus building way, and without stabbing your teammates in the
        face along the way.'', \cite{Atwood}.
        \end{myquote}

        \begin{myquote}``
        I'd say there are two main reasons to enforce a single code format in a project. First has to
        do with version control: with everybody formatting the code identically, all changes in the
        files are guaranteed to be meaningful. No more just adding or removing a space here or there,
        let alone reformatting an entire file as a `side effect' of actually changing just a line or
        two.'', \cite{Geukens}.
        \end{myquote}

    \end{enumerate}


\newpage
\section{Objetivos}

    O objeto neste trabalho de TCC proposto aqui não é inicialmente suportar todas as regras de
    formatação de todas as linguagens de programação, mas a criação de uma estrutura básica inicial
    e robusta que sejam capaz de ser desenvolvida a ponto de ser facilmente expandida, tanto na
    adição de novos módulos de processamento no programa escrito, tanto pelo usuário final na
    escrita dos arquivos de programação.


\subsection{Objetivos Gerais}

    \begin{enumerate}

        \item

        Escrever o programa em C++ ou afins, para permitir também que a formação/beautifying seja
        (em trabalhos futuros/talvez nesse) dinâmico, isto é, na medida que você digita o texto, ele
        é formatado para você. Assim você pode focar mais em escrever o código, ao invés que se
        preocupar com o espaçamento, alinhamento, parenteses, linhas novas, e o que mais que seja.

        \item

        Utilizar o Framework `doctest` para escrita dos Testes de Unidade. Pois após procurar e
        testar alguns frameworks para testes de unidade em C++, entrou-se este como servindo muito
        bem as requisitos do projecto. Ele causa baixíssimo incremento no tempo de compilação e
        permite que os testes possam ser escritos no mesmo arquivo onde encontram-se o código do
        programa, sem que eles sejam compilados.

        \item

        Utilizar uma versão/algoritmo multi-core, assim cada uma das regras pode ser processada em
        paralelo e sobre o mesmo source code original. Essa parte é bastante complexa de ser escrita
        por que as regras entre si podem gerar conflitos sobre o que elas estão fazendo. Assim para
        resolver esse problema, fazer com que cada regra processada gere um objeto de mudanças que
        essa regra está propondo. Assim no final do processamento de todas as regras, será realizado
        um fusão das mudanças que cada uma decidiu realizer, e caso duas regras queriam mudar o
        mesmo pedaço/trecho de código, será lançada um exceção e uma nova classe de mudanças/regra
        deve estar disponível para resolver esse conflito. Caso não exista, ambas as mudanças são
        descartadas e somente as mudanças sem conflitos são refletidas no código.

    \end{enumerate}


\newpage
\section{Método de pesquisa}

\hspace*{5mm}

        O trabalho...


\newpage
\section{Cronograma}

   \begin{tabularx}{\linewidth}{|X|*{11}{c|}}
        \hline
        \multicolumn{1}{|c|}{\multirow{2}{*}{Etapas}} & \multicolumn{11}{|c|}{Meses}\\ \cline{2-12}

        & fev & mar & abr & mai & jun & jul & ago & set & out & nov & dez  \\ \hline

        Estudo da fundamentação teórica necessária
        &  x  &  x  &  x  &     &     &     &     &     &     &     &     \\ \hline

        Estudo da implementação de agentes na educação
        &     &  x  &  x  &     &     &     &     &     &     &     &     \\ \hline

        Estudo da ferramento Unity
        &     &     &  x  &  x  &  x  &  x  &  x  &     &     &     &     \\ \hline

        Escrita de um esboço do TCC
        &     &     &     &     &  x  &  x  &  x  &  x  &     &     &     \\ \hline

       Estudo da ferramenta Middler VR
        &     &     &     &     &     &  x  &  x  &     &     &     &     \\ \hline

        Finalização da escrita do TCC
        &     &     &     &     &     &     &     &     &  x  &     &     \\ \hline

        Ajustes finais no texto do TCC
        &     &     &     &     &     &     &     &     &  x  &  x  &     \\ \hline

        Defesa do TCC
        &     &     &     &     &     &     &     &     &     &     &  x  \\ \hline

    \end{tabularx}


\newpage
\section{Custos}
    \begin{tabular}{l l l l}
        \hline
        Item                    &   Quantidade  &   Valor Unitário (R\$)    &   Valor Total (R\$) \\
        \hline
        Impressão               &   200         &   0,10                    &   20,00             \\

        Programador             &   1           &   1500,00                 &   1500,00           \\
        Notebook                &   1           &   2500,00                 &   2500,00           \\
        Desktop                 &   1           &   3000,00                 &   3000,00           \\
        Reserva de contingência &   1           &   4000,00                 &   4000,00           \\
        \hline
        Total                   &               &                           &   11020,00
    \end{tabular}

\newpage
\section{Recursos Humanos}
    \begin{tabular}{l l}
        \hline
        Nome                            & Função                  \\
        \hline
        Luiz Filipe Moresco da Silva    & Autor                   \\
        Ricardo Azambuja Silveira       & Orientador              \\
        Renato Cislaghi                 & Coordenador de Projetos \\
        Thiago Ângelo Gelaim            & Coorientador            \\
        \hline
    \end{tabular}
    \\

\newpage
\section{Comunicação}
    \begin{tabular}{l l l l}
        \hline
        O quê  & De quem & Para Quem & Como \\
        \hline
        Proposta de TCC         & Autor     & Renato Cislaghi   & Site de projetos \\
        Relatório de TCC I      & Autor     & Renato Cislaghi   & Site de projetos \\
        Prévia do TCC, em TCC I & Autor     & Banca             & E-mail \\
        Defesa do TCC           & Autor     & Banca             & Pessoalmente \\
        Reunião de Orientação   & Orientadores  & Autor         & Pessoalmente \\
        \hline
    \end{tabular}

\newpage
\section{Riscos}

    % https://tex.stackexchange.com/questions/366156/how-to-change-the-left-padding-for-one-latex-tables-cell
    % https://tex.stackexchange.com/questions/366155/how-to-write-a-table-a-little-larger-than-the-paragraphs-with-centered-columns
    %
    \begin{adjustwidth}{-0.5\marginparwidth}{-0.5\marginparwidth}
    \small
    \begin{tabularx}{\linewidth}
    {|
        *1{                 >{\RaggedRight\arraybackslash\hsize=1.1\hsize }X       |} % Riscos
        *3{@{\hspace{3.0pt}}>{\Centering\arraybackslash                   }p{0.9cm}|} % Probabilidade, Impacto, Prioridade
        *2{                 >{\RaggedRight\arraybackslash\hsize=0.95\hsize}X       |} % Resposta, Prevenção
    }

    \hline Riscos  & Pro\-ba\-bi\-li\-da\-de & Im\-pac\-to & Prio\-ri\-da\-de & Es\-tra\-té\-gia de res\-pos\-ta & Ações de pre\-ven\-ção \\ \hline

    % Row 1
    % Riscos
    \hline Problemas com perda de dados &
    % Probabilidade
    Baixa &
    % Impacto
    Alto &
    % Prioridade
    Alta &
    % Estratégia de resposta
    Uso do backup &
    % Ações de prevenção
    Backup periódicos \\ \hline

    % Row 2
    % Riscos
    \hline Alteração do cronograma ou descontinuidade do projeto onde recebo uma bolsa &
    % Probabilidade
    \rlap{Média} &
    % Impacto
    Alto &
    % Prioridade
    Alta &
    % Estratégia de resposta
    Redefinição da data de entrega do trabalho &
    % Ações de prevenção
    Monitoramento contínuo das informações obtidas com superiores imediatos \\ \hline

    \hline \end{tabularx}
    \end{adjustwidth}

\newpage

\bibliographystyle{abbrv}
\bibliography{refs}

\end{document}
